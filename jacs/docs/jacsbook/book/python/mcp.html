<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MCP Integration - JACS Usage Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../getting-started/what-is-jacs.html"><strong aria-hidden="true">1.</strong> What is JACS?</a></li><li class="chapter-item expanded "><a href="../getting-started/concepts.html"><strong aria-hidden="true">2.</strong> Core Concepts</a></li><li class="chapter-item expanded "><a href="../getting-started/quick-start.html"><strong aria-hidden="true">3.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="../rust/installation.html"><strong aria-hidden="true">4.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../rust/cli.html"><strong aria-hidden="true">5.</strong> CLI Usage</a></li><li class="chapter-item expanded "><a href="../rust/agent.html"><strong aria-hidden="true">6.</strong> Creating an Agent</a></li><li class="chapter-item expanded "><a href="../rust/documents.html"><strong aria-hidden="true">7.</strong> Working with Documents</a></li><li class="chapter-item expanded "><a href="../rust/agreements.html"><strong aria-hidden="true">8.</strong> Creating and Using Agreements</a></li><li class="chapter-item expanded "><a href="../rust/library.html"><strong aria-hidden="true">9.</strong> Rust Library API</a></li><li class="chapter-item expanded "><a href="../rust/observability.html"><strong aria-hidden="true">10.</strong> Observability</a></li><li class="chapter-item expanded "><a href="../nodejs/installation.html"><strong aria-hidden="true">11.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../nodejs/basic-usage.html"><strong aria-hidden="true">12.</strong> Basic Usage</a></li><li class="chapter-item expanded "><a href="../nodejs/mcp.html"><strong aria-hidden="true">13.</strong> MCP Integration</a></li><li class="chapter-item expanded "><a href="../nodejs/http.html"><strong aria-hidden="true">14.</strong> HTTP Server</a></li><li class="chapter-item expanded "><a href="../nodejs/express.html"><strong aria-hidden="true">15.</strong> Express Middleware</a></li><li class="chapter-item expanded "><a href="../nodejs/api.html"><strong aria-hidden="true">16.</strong> API Reference</a></li><li class="chapter-item expanded "><a href="../python/installation.html"><strong aria-hidden="true">17.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../python/basic-usage.html"><strong aria-hidden="true">18.</strong> Basic Usage</a></li><li class="chapter-item expanded "><a href="../python/mcp.html" class="active"><strong aria-hidden="true">19.</strong> MCP Integration</a></li><li class="chapter-item expanded "><a href="../python/api.html"><strong aria-hidden="true">20.</strong> API Reference</a></li><li class="chapter-item expanded "><a href="../schemas/overview.html"><strong aria-hidden="true">21.</strong> JSON Schemas</a></li><li class="chapter-item expanded "><a href="../schemas/agent.html"><strong aria-hidden="true">22.</strong> Agent Schema</a></li><li class="chapter-item expanded "><a href="../schemas/document.html"><strong aria-hidden="true">23.</strong> Document Schema</a></li><li class="chapter-item expanded "><a href="../schemas/task.html"><strong aria-hidden="true">24.</strong> Task Schema</a></li><li class="chapter-item expanded "><a href="../schemas/configuration.html"><strong aria-hidden="true">25.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../advanced/security.html"><strong aria-hidden="true">26.</strong> Security Model</a></li><li class="chapter-item expanded "><a href="../advanced/crypto.html"><strong aria-hidden="true">27.</strong> Cryptographic Algorithms</a></li><li class="chapter-item expanded "><a href="../advanced/storage.html"><strong aria-hidden="true">28.</strong> Storage Backends</a></li><li class="chapter-item expanded "><a href="../advanced/custom-schemas.html"><strong aria-hidden="true">29.</strong> Custom Schemas</a></li><li class="chapter-item expanded "><a href="../advanced/testing.html"><strong aria-hidden="true">30.</strong> Testing</a></li><li class="chapter-item expanded "><a href="../integrations/mcp.html"><strong aria-hidden="true">31.</strong> Model Context Protocol (MCP)</a></li><li class="chapter-item expanded "><a href="../integrations/web-servers.html"><strong aria-hidden="true">32.</strong> Web Servers</a></li><li class="chapter-item expanded "><a href="../integrations/databases.html"><strong aria-hidden="true">33.</strong> Databases</a></li><li class="chapter-item expanded "><a href="../examples/cli.html"><strong aria-hidden="true">34.</strong> CLI Examples</a></li><li class="chapter-item expanded "><a href="../examples/nodejs.html"><strong aria-hidden="true">35.</strong> Node.js Examples</a></li><li class="chapter-item expanded "><a href="../examples/python.html"><strong aria-hidden="true">36.</strong> Python Examples</a></li><li class="chapter-item expanded "><a href="../examples/integrations.html"><strong aria-hidden="true">37.</strong> Integration Examples</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../reference/cli-commands.html"><strong aria-hidden="true">38.</strong> CLI Command Reference</a></li><li class="chapter-item expanded "><a href="../reference/configuration.html"><strong aria-hidden="true">39.</strong> Configuration Reference</a></li><li class="chapter-item expanded "><a href="../reference/errors.html"><strong aria-hidden="true">40.</strong> Error Codes</a></li><li class="chapter-item expanded "><a href="../reference/migration.html"><strong aria-hidden="true">41.</strong> Migration Guide</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">JACS Usage Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mcp-integration"><a class="header" href="#mcp-integration">MCP Integration</a></h1>
<p>JACS provides seamless integration with the Model Context Protocol (MCP), enabling cryptographically signed and verified communication between AI agents and MCP servers. This integration ensures that all tool calls, resource requests, and prompt interactions are authenticated and tamper-proof.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>JACS MCP integration provides:</p>
<ul>
<li><strong>Cryptographic Authentication</strong>: All MCP messages are signed and verified</li>
<li><strong>FastMCP Support</strong>: Native integration with FastMCP servers</li>
<li><strong>HTTP &amp; SSE Transports</strong>: Support for both HTTP and Server-Sent Events</li>
<li><strong>Transparent Security</strong>: Existing MCP code works with minimal changes</li>
</ul>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<h3 id="basic-mcp-server-with-jacs"><a class="header" href="#basic-mcp-server-with-jacs">Basic MCP Server with JACS</a></h3>
<pre><code class="language-python">import jacs
import os
from pathlib import Path
from jacs.mcp import JACSMCPServer
from fastmcp import FastMCP
import uvicorn

# Setup JACS configuration
current_dir = Path(__file__).parent.absolute()
jacs_config_path = current_dir / "jacs.config.json"

# Set password for private key
os.environ["JACS_PRIVATE_KEY_PASSWORD"] = "your_secure_password"

# Initialize JACS
jacs.load(str(jacs_config_path))

# Create FastMCP server with JACS authentication
mcp = JACSMCPServer(FastMCP("Authenticated Echo Server"))

@mcp.tool()
def echo_tool(text: str) -&gt; str:
    """Echo the input text with server prefix"""
    return f"SERVER SAYS: {text}"

@mcp.resource("echo://static")
def echo_resource() -&gt; str:
    return "Echo!"

@mcp.prompt("echo")
def echo_prompt(text: str) -&gt; str:
    return f"Echo prompt: {text}"

# Get the ASGI app with JACS middleware
sse_app_with_middleware = mcp.sse_app()

if __name__ == "__main__":
    print("Starting JACS-enabled MCP server...")
    uvicorn.run(sse_app_with_middleware, host="localhost", port=8000)
</code></pre>
<h3 id="basic-mcp-client-with-jacs"><a class="header" href="#basic-mcp-client-with-jacs">Basic MCP Client with JACS</a></h3>
<pre><code class="language-python">import asyncio
import os
from pathlib import Path
import jacs
from jacs.mcp import JACSMCPClient

# Setup JACS configuration
current_dir = Path(__file__).parent.absolute()
jacs_config_path = current_dir / "jacs.client.config.json"

# Set password for private key
os.environ["JACS_PRIVATE_KEY_PASSWORD"] = "your_secure_password"

# Initialize JACS
jacs.load(str(jacs_config_path))

async def main():
    server_url = "http://localhost:8000/sse"
    
    try:
        client = JACSMCPClient(server_url)
        
        async with client:
            # Call authenticated tool
            result = await client.call_tool("echo_tool", {
                "text": "Hello from authenticated client!"
            })
            print(f"Tool result: {result}")
            
            # Read authenticated resource
            resource = await client.read_resource("echo://static")
            print(f"Resource: {resource}")
            
    except Exception as e:
        print(f"Error: {e}")

if __name__ == "__main__":
    asyncio.run(main())
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<h3 id="jacs-configuration-file"><a class="header" href="#jacs-configuration-file">JACS Configuration File</a></h3>
<p>Create a <code>jacs.config.json</code> file for your server and client:</p>
<pre><code class="language-json">{
  "$schema": "https://hai.ai/schemas/jacs.config.schema.json",
  "jacs_agent_id_and_version": "your-agent-id:version",
  "jacs_agent_key_algorithm": "RSA-PSS",
  "jacs_agent_private_key_filename": "private.pem.enc",
  "jacs_agent_public_key_filename": "public.pem",
  "jacs_data_directory": "./jacs",
  "jacs_default_storage": "fs",
  "jacs_key_directory": "./jacs_keys",
  "jacs_private_key_password": "your_password",
  "jacs_use_security": "true"
}
</code></pre>
<h3 id="key-generation"><a class="header" href="#key-generation">Key Generation</a></h3>
<p>Generate cryptographic keys for your agents:</p>
<pre><code class="language-python">import jacs

# Load configuration
jacs.load("jacs.config.json")

# Generate keys (only needed once per agent)
agent = jacs.Agent()
agent.generate_keys()

# Create agent document
agent_doc = agent.create_agent({
    "name": "MCP Server Agent",
    "description": "Agent for MCP server authentication",
    "type": "mcp_server"
})

print(f"Agent ID: {agent_doc['jacsId']}")
</code></pre>
<h2 id="integration-patterns"><a class="header" href="#integration-patterns">Integration Patterns</a></h2>
<h3 id="1-fastmcp-with-jacs-middleware"><a class="header" href="#1-fastmcp-with-jacs-middleware">1. FastMCP with JACS Middleware</a></h3>
<p>The <code>JACSMCPServer</code> wrapper automatically adds cryptographic middleware:</p>
<pre><code class="language-python">from jacs.mcp import JACSMCPServer
from fastmcp import FastMCP

# Create FastMCP server
base_server = FastMCP("My Server")

# Wrap with JACS authentication
authenticated_server = JACSMCPServer(base_server)

# All decorators work normally
@authenticated_server.tool()
def my_tool(data: str) -&gt; str:
    return f"Processed: {data}"
</code></pre>
<h3 id="2-http-mcp-with-manual-signing"><a class="header" href="#2-http-mcp-with-manual-signing">2. HTTP MCP with Manual Signing</a></h3>
<p>For HTTP-based MCP servers, you can manually sign responses:</p>
<pre><code class="language-python">from fastapi import FastAPI, Request
from fastapi.responses import JSONResponse
import jacs

app = FastAPI()

@app.post("/api/tool")
async def call_tool(request: Request):
    # Verify incoming request
    body = await request.body()
    verified_data = jacs.verify_request(body.decode())
    
    # Process the tool call
    result = {"message": "Tool executed", "data": verified_data}
    
    # Sign and return response
    signed_response = jacs.sign_response(result)
    return JSONResponse(content=signed_response)
</code></pre>
<h3 id="3-standard-mcp-with-stdio"><a class="header" href="#3-standard-mcp-with-stdio">3. Standard MCP with Stdio</a></h3>
<p>For stdio-based MCP servers:</p>
<pre><code class="language-python">from mcp.server.fastmcp import FastMCP
import jacs

# Initialize JACS
jacs.load("jacs.config.json")

mcp = FastMCP("Stdio Server")

@mcp.tool()
def secure_tool(input_data: str) -&gt; str:
    """A tool that processes signed input"""
    # Input is automatically verified by JACS middleware
    return f"Securely processed: {input_data}"

if __name__ == "__main__":
    # Run with stdio transport
    mcp.run()
</code></pre>
<h2 id="advanced-usage"><a class="header" href="#advanced-usage">Advanced Usage</a></h2>
<h3 id="custom-authentication-logic"><a class="header" href="#custom-authentication-logic">Custom Authentication Logic</a></h3>
<pre><code class="language-python">from jacs.mcp import JACSMCPServer
from fastmcp import FastMCP
import jacs

class CustomJACSServer:
    def __init__(self, base_server: FastMCP):
        self.base_server = base_server
        self.setup_middleware()
    
    def setup_middleware(self):
        # Custom verification logic
        @self.base_server.middleware("http")
        async def custom_auth(request, call_next):
            # Custom JACS verification
            if self.should_verify(request):
                body = await request.body()
                verified = jacs.verify_request(body.decode())
                # Update request with verified data
            
            response = await call_next(request)
            
            # Custom signing logic
            if self.should_sign(response):
                # Sign response
                pass
            
            return response
    
    def should_verify(self, request) -&gt; bool:
        # Custom logic for when to verify
        return True
    
    def should_sign(self, response) -&gt; bool:
        # Custom logic for when to sign
        return True
</code></pre>
<h3 id="multi-agent-authentication"><a class="header" href="#multi-agent-authentication">Multi-Agent Authentication</a></h3>
<pre><code class="language-python">import jacs
from jacs.mcp import JACSMCPServer, JACSMCPClient

# Server side - configure for multiple agents
server_config = {
    "trusted_agents": ["agent1-id", "agent2-id"],
    "require_signatures": True
}

mcp_server = JACSMCPServer(FastMCP("Multi-Agent Server"))

@mcp_server.tool()
def multi_agent_tool(data: str, agent_context: dict) -&gt; str:
    """Tool that can be called by multiple authenticated agents"""
    agent_id = agent_context.get("agent_id")
    return f"Agent {agent_id} processed: {data}"

# Client side - each agent uses its own keys
client1 = JACSMCPClient("http://server:8000/sse")
client2 = JACSMCPClient("http://server:8000/sse")
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<h3 id="common-jacs-mcp-errors"><a class="header" href="#common-jacs-mcp-errors">Common JACS MCP Errors</a></h3>
<pre><code class="language-python">import jacs
from jacs.mcp import JACSMCPClient

async def robust_mcp_client():
    try:
        client = JACSMCPClient("http://localhost:8000/sse")
        async with client:
            result = await client.call_tool("my_tool", {"data": "test"})
            return result
            
    except jacs.CryptographicError as e:
        print(f"Signature verification failed: {e}")
        # Handle invalid signatures
        
    except jacs.ConfigurationError as e:
        print(f"JACS configuration error: {e}")
        # Handle missing keys or config
        
    except ConnectionError as e:
        print(f"MCP connection failed: {e}")
        # Handle network issues
        
    except Exception as e:
        print(f"Unexpected error: {e}")
</code></pre>
<h3 id="debugging-authentication-issues"><a class="header" href="#debugging-authentication-issues">Debugging Authentication Issues</a></h3>
<pre><code class="language-python">import logging
import jacs

# Enable detailed JACS logging
logging.basicConfig(level=logging.DEBUG)
jacs_logger = logging.getLogger("jacs")
jacs_logger.setLevel(logging.DEBUG)

# Enable MCP debugging
mcp_logger = logging.getLogger("mcp")
mcp_logger.setLevel(logging.DEBUG)

# Your MCP code here...
</code></pre>
<h2 id="production-deployment"><a class="header" href="#production-deployment">Production Deployment</a></h2>
<h3 id="security-best-practices"><a class="header" href="#security-best-practices">Security Best Practices</a></h3>
<ol>
<li><strong>Key Management</strong>: Store private keys securely</li>
<li><strong>Environment Variables</strong>: Use environment variables for passwords</li>
<li><strong>Network Security</strong>: Use TLS for network transport</li>
<li><strong>Key Rotation</strong>: Implement key rotation policies</li>
</ol>
<pre><code class="language-python">import os
import jacs

# Production configuration
config = {
    "jacs_key_directory": os.getenv("JACS_KEY_DIR", "/secure/keys"),
    "jacs_private_key_password": os.getenv("JACS_KEY_PASSWORD"),
    "jacs_use_security": "true",
    "jacs_agent_key_algorithm": "RSA-PSS"
}

# Load with production settings
jacs.load_config(config)
</code></pre>
<h3 id="docker-deployment"><a class="header" href="#docker-deployment">Docker Deployment</a></h3>
<pre><code class="language-dockerfile">FROM python:3.11-slim

WORKDIR /app

# Install dependencies
COPY requirements.txt .
RUN pip install -r requirements.txt

# Copy application
COPY . .

# Create secure key directory
RUN mkdir -p /secure/keys &amp;&amp; chmod 700 /secure/keys

# Set environment variables
ENV JACS_KEY_DIR=/secure/keys
ENV JACS_USE_SECURITY=true

# Run MCP server
CMD ["python", "mcp_server.py"]
</code></pre>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<h3 id="unit-testing-mcp-tools"><a class="header" href="#unit-testing-mcp-tools">Unit Testing MCP Tools</a></h3>
<pre><code class="language-python">import pytest
import jacs
from jacs.mcp import JACSMCPServer
from fastmcp import FastMCP
from fastmcp.client import Client
from fastmcp.client.transports import FastMCPTransport

@pytest.fixture
def jacs_mcp_server():
    # Setup test configuration
    jacs.load("test.config.json")
    
    server = FastMCP("Test Server")
    return JACSMCPServer(server)

@pytest.fixture
def test_client(jacs_mcp_server):
    transport = FastMCPTransport(jacs_mcp_server)
    return Client(transport)

async def test_authenticated_tool(test_client):
    async with test_client:
        result = await test_client.call_tool("echo_tool", {"text": "test"})
        assert "test" in str(result)
</code></pre>
<h2 id="performance-considerations"><a class="header" href="#performance-considerations">Performance Considerations</a></h2>
<h3 id="optimization-tips"><a class="header" href="#optimization-tips">Optimization Tips</a></h3>
<ol>
<li><strong>Key Caching</strong>: JACS automatically caches keys</li>
<li><strong>Batch Operations</strong>: Group multiple tool calls when possible</li>
<li><strong>Connection Pooling</strong>: Reuse client connections</li>
<li><strong>Async Operations</strong>: Use async/await properly</li>
</ol>
<pre><code class="language-python"># Efficient client usage
async def efficient_mcp_usage():
    client = JACSMCPClient("http://server:8000/sse")
    
    # Single connection for multiple operations
    async with client:
        # Batch multiple tool calls
        tasks = [
            client.call_tool("tool1", {"data": f"item{i}"})
            for i in range(10)
        ]
        results = await asyncio.gather(*tasks)
    
    return results
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ul>
<li><strong><a href="fastmcp.html">FastMCP Integration</a></strong> - Advanced FastMCP patterns</li>
<li><strong><a href="api.html">API Reference</a></strong> - Complete API documentation</li>
<li><strong><a href="../examples/python.html">Examples</a></strong> - More complex examples</li>
<li><strong><a href="../security.html">Security Guide</a></strong> - Security best practices</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../python/basic-usage.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../python/api.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../python/basic-usage.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../python/api.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
