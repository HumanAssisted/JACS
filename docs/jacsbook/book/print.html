<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>JACS Usage Documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="guide/installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="guide/agent.html"><strong aria-hidden="true">2.</strong> Creating an Agent</a></li><li class="chapter-item expanded "><a href="guide/documents.html"><strong aria-hidden="true">3.</strong> working with documents</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="cli/index.html"><strong aria-hidden="true">4.</strong> Command Line Tool</a></li><li class="chapter-item expanded "><a href="design/security.html"><strong aria-hidden="true">5.</strong> Security</a></li><li class="chapter-item expanded "><a href="design/schemas.html"><strong aria-hidden="true">6.</strong> JSON schemas</a></li><li class="spacer"></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">JACS Usage Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="json-is-all-you-need-"><a class="header" href="#json-is-all-you-need-">JSON is all you need! **</a></h1>
<p>As a developer, this is a good place to start.
Be sure you've seen the    <a href="https://github.com/HumanAssisted/JACS">JACS on github</a></p>
<p>JACS docs are in a format already widely adopted and enjoyed: JSON. However, JACS can sign any type of document that can be checksummed, and any JSON document can be an embedded JACS document. The documents with signatures are always JSON. Therefore, they are independent of network protocols or database formats and can be shared and stand-alone.</p>
<p>You will use JACS lib and an agent to validate a document. To use, you create JSON documents and then sign them with your agent.</p>
<p>When those other services have modified the document, you can verifiy the agent, verify the changes, and sign the changes.</p>
<p>Flexible for developers - store, index, and search the docouments how you like.
Any JSON document can be used as a JACS doc as long as it has the JACS header, which are some required fields about the creator and version.
Enforcement of schemas relies on <a href="https://json-schema.org/">JSON Schema's</a> as a basic formalization.</p>
<p>Most devs building connected Agent Apps will want to use <a href="https://github.com/HumanAssistedIntelligence/sophon">Sophon</a>. <a href="https://github.com/HumanAssistedIntelligence/sophon">Sophon</a> will make it easy to use, but also imposes a lot of opinions.</p>
<p>JACS started as <a href="https://github.com/HumanAssistedIntelligence/OSAP">OSAP</a> and stands for - JSON Agent Communication Standard.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>To install the command line tool for creating and verifying agents and documents</p>
<pre><code>$ cargo install jacs
$ jacs --help
</code></pre>
<p>If you are working in Rust, add the rust lib to your project</p>
<pre><code>cargo add jacs
</code></pre>
<h2 id="setting-up"><a class="header" href="#setting-up">setting up</a></h2>
<p>First, configure your configuration which are loaded as environment variables.
Create a <code>jacs.config.json</code> from <a href="guide/./jacs.config.example.json">the example</a>
For an explanation see <a href="guide/./schemas/jacs.config.schema.json">the schema for the config.</a></p>
<p>To create a config file, you can run</p>
<pre><code>jacs config create
</code></pre>
<p>Which will give you this dialog.</p>
<p>You can use <code>jacs config read</code> to check the configs.</p>
<p>Note: Do not use <code>jacs_private_key_password</code> in production. Use the environment variable <code>JACS_PRIVATE_KEY_PASSWORD</code> in a secure manner. This encrypts a private key needed for signing documents. You can create a new version of your agent with a new key, but this is not ideal.</p>
<h2 id="developing"><a class="header" href="#developing">developing</a></h2>
<p>The pre-commit hook requires some libraries</p>
<p>See pre-commit</p>
<ul>
<li>install <code>jq</code> e.g. <code>brew install jq</code></li>
<li>for documentation    <code>npm install -g @adobe/jsonschema2md</code></li>
<li>cargo install mdbook</li>
</ul>
<p>Otherwise it's a standard Rust project.</p>
<ul>
<li>install Rust and your favorite editor</li>
<li>see tests, examples, and benches</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="agents"><a class="header" href="#agents">Agents</a></h1>
<p>To use JACS you create an <code>Agent</code>  and then use it to create docoments that conform to the JACS <code>Header</code> format.</p>
<p>First, create a json document that follows the schema for an agent, and use it in the library to start building other things.</p>
<pre><code>{
  "$schema": "https://hai.ai/schemas/agent/v1/agent-schema.json",
  "name": "Agent Smith",
  "agentType": "ai",
  "description": "An agent without keys, id or version",
  "favorite-snack": "mango"
}

</code></pre>
<p>An id, version etc, will be created  when you load the file from the command line</p>
<pre><code>jacs agent create ./examples/raw/mysecondagent.new.json --create-keys true
</code></pre>
<p>Your agent will look something like this and you will have also created keys. The agent is self-signed and all the fields are hashed.
There is also a public and private key created in the directory set with <code>jacs_key_directory</code>. DO NOT use the keys included in the repo.</p>
<pre><code>{
  "$schema": "https://hai.ai/schemas/agent/v1/agent-schema.json",
  "agentType": "ai",
  "description": "An agent without keys, id or version",
  "jacsId": "809750ec-215d-440f-9e03-f71114924a1d",
  "jacsOriginalDate": "2024-04-11T05:40:15.934777+00:00",
  "jacsOriginalVersion": "8675c919-cb3a-40c8-a716-7f8e04350651",
  "jacsSha256": "45c7af0a701a97907926910df7005a0a69e769380314b1daf15c7186d3c7263f",
  "jacsSignature": {
    "agentID": "809750ec-215d-440f-9e03-f71114924a1d",
    "agentVersion": "8675c919-cb3a-40c8-a716-7f8e04350651",
    "date": "2024-04-11T05:40:15.949350+00:00",
    "fields": [
      "$schema",
      "agentType",
      "description",
      "jacsId",
      "jacsOriginalDate",
      "jacsOriginalVersion",
      "jacsVersion",
      "jacsVersionDate",
      "name"
    ],
    "publicKeyHash": "8878ef8b8eae9420475f692f75bce9b6a0512c4d91e4674ae21330394539c5e6",
    "signature": "LcsuFUqYIVsLfzaDTcXv+HN/ujd+Zv6A1QEiLTSPPHQVRlktmHIX+igd9wgStMVXB0uXH0yZknjJXv/7hQC0J5o5ZuNVN+ITBqG8fg8CEKPAzkQo3zdKfTWBw/GfjyyvItpZzQMGAPoOChS0tc0po5Z8ftOTmsxbfkM4ULGzLrVrhs21i/HpFa8qBzSVyhznwBT4fqOP6b1NZl7IABJS3pQdKbEZ9+Az+O4/Nl55mpfgAppOEbr5XNFIGRKvQ3K5oJS55l6e3GrbH3+5J3bDC1Gxh4wbqYJXVBVKipdJVCtoftEoi1ipTxVtv6j/86egUG7+N1CA6p33q1TXJqwqh4YNFq+9XAAj4X7oSyChA5j4VGegl6x5g+qGMszLGJC2oK6Xalna4dGETe3bjx9+QBQKrYc9T3K3X7Ros0uahiUyx8ekuX25ERGojtYIOpjcGLiPGtp95lbbnX/0cLcbJC2IZjduBeS76RTHlt3/RG5ygbzwK3Pao41wVNJyjLoy5SCi6pguTDjMBGQWjTOfKmK3vv9E8tI6T2lJJqeLtNLIkBpZ2KodqkcTr+80ySehMKglwHBQkjx646afCb+dOwdqhhHQt1gSasQRTxHUWg9NcmZ2uqJoXgQ/mGhsz3b8lgRcZEdA8jf9bxMal3+vWhrY/c3o7y0wiajx838ijYE=",
    "signing_algorithm": "RSA-PSS"
  },
  "jacsVersion": "8675c919-cb3a-40c8-a716-7f8e04350651",
  "jacsVersionDate": "2024-04-11T05:40:15.934777+00:00",
  "name": "Agent Smith"
}

</code></pre>
<p>You can verify you are set up with this command:</p>
<pre><code>jacs agent verify  -a ./examples/agent/fe00bb15-8c7f-43ac-9413-5a7bd5bb039d\:1f639f69-b3a7-45d5-b814-bc7b91fb3b97.json
</code></pre>
<p>To make it easier to use, add <code>jacs_agent_id_and_version</code> to your config and you can just run</p>
<pre><code>jacs agent verify
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="working-with-documents"><a class="header" href="#working-with-documents">working with documents</a></h1>
<p>Now that your agent is set up can create, update, and sign documents with your agent.</p>
<h2 id="cli"><a class="header" href="#cli">CLI</a></h2>
<p>To create create documents, select a file or directory and the documents will be copied to <code>jacs_data_directory</code> and renamed.</p>
<pre><code>jacs document create -d ./examples/raw/
</code></pre>
<p>Now you can verify a document is valid, even with custom JSON schema, and verify the signature of the document.</p>
<pre><code>jacs document verify -f ./examples/documents/MODIFIED_e4b3ac57-71f4-4128-b0c4-a44a3bb4d98d\:975f4523-e2e0-4b64-9c31-c718796fbdb1.json
</code></pre>
<p>Or a whole directory</p>
<pre><code>jacs document verify -d ./examples/documents/
</code></pre>
<p>You can also verify using a custom JSON Schema</p>
<pre><code> jacs document verify -f ./examples/documents/05f0c073-9df5-483b-aa77-2c3259f02c7b\:17d73042-a7dd-4536-bfd1-2b7f18c3503f.json -s ./examples/documents/custom.schema.json
</code></pre>
<p>If you share your public key, other agents can verify the document is from your agent , but is not available in the command line yet. Also, note that the command line doesn't yet allow for the modification of documents or agents.</p>
<p>To modify a document, copy the original and modify how you'd like, and then JACS can update the version and signature</p>
<pre><code>jacs document update -f ./examples/documents/05f0c073-9df5-483b-aa77-2c3259f02c7b\:17d73042-a7dd-4536-bfd1-2b7f18c3503f.json -n examples/raw/howtoupdate-05f0c073-9df5-483b-aa77-2c3259f02c7b.json -o updatedfruit.json
</code></pre>
<p>Filenames will always end with "jacs.json", so the -o</p>
<p>You can embed external files</p>
<pre><code>jacs document create -f ./examples/raw/not-fruit.json --attach ./examples/raw/mobius.jpeg --embed true
</code></pre>
<h2 id="api"><a class="header" href="#api">API</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="command-line-tool"><a class="header" href="#command-line-tool">Command Line Tool</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="security"><a class="header" href="#security">Security</a></h1>
<p>JACS goal is to introduce no safety vulnerabilities to systems where it is integrated.
Open to ideas on what cryptography to add next: https://cryptography.rs/, like https://doc.dalek.rs/bulletproofs/index.html.</p>
<h3 id="filesystem"><a class="header" href="#filesystem">filesystem</a></h3>
<p>However, filesystem acces can also be turned off completely for documents. This means your app passing strings in and out of JACS but can not save().</p>
<p>By default a directory is used that is configured.  JACS should not touch any files outside the key directory JACS_KEY_DIRECTORY and the JACS_DIRECTORY.</p>
<h3 id="private-keys"><a class="header" href="#private-keys">private keys</a></h3>
<p>Private keys are stored in memory with https://docs.rs/secrecy/latest/secrecy/
The are also encrypted when on the filesystem if you have set the password with the keys are created.</p>
<h2 id="header-validation-process"><a class="header" href="#header-validation-process">header validation process</a></h2>
<p>The following is a brief explanation of documents are created, signed, and verified.</p>
<h3 id="signing"><a class="header" href="#signing">signing</a></h3>
<p>Signature options are "ring-Ed25519", "RSA-PSS", and "pq-dilithium".
These are all open source projects and JACS is not an encryption library in itself.</p>
<ol>
<li>a json document is loaded as a "new" document</li>
<li>as a new document it must not have an id, version etc</li>
<li>an id and version uuid is created, along with date, etc</li>
<li>all the fields are hashed and put into a field that is not part of the hash, and the hash is added</li>
<li>all the fields are used to sign with the agent's private key, and the public keys sha256 is aded to the document, as well as the signing agent's id and version</li>
</ol>
<h3 id="verifying"><a class="header" href="#verifying">verifying</a></h3>
<ol>
<li>a document is loaded and is verified as being a jacs document using the schema</li>
<li>the hash is checked by taking the value of the fields excluding signature areas, and checking the hash</li>
<li>the agent id is used to find the public key of the document and the signature is checked</li>
</ol>
<h2 id="trust"><a class="header" href="#trust">trust</a></h2>
<p>When data is changed documents are versioned and the version is cryptographically signed by your agent.
Changes can be verified and approved by other agents using your public key, allowing for creation and exchange of trusted data.</p>
<p>NOTE: Doesnâ€™t <em>require</em> central key authority yet, but this does mean that anyone can spoof anyone.
Until then, use for self signing only, or exchange public keys only with trusted services.</p>
<p>JACS should not need to make network calls for JSON schema as they are loaded into the lib.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="json-schemas"><a class="header" href="#json-schemas">JSON schemas</a></h1>
<h2 id="schemas-ids-and-versions-vs-signatures"><a class="header" href="#schemas-ids-and-versions-vs-signatures">Schemas IDs and Versions vs Signatures</a></h2>
<p>IDs of agents and documents should be unique to your agent as they are a combination of ID and Version. However, if you share your documents, and we expect that you will, documents can be copied by other agents at any time and they can forge IDs and sign their docs.</p>
<p>Semantic versioning would break if the document forks because multiple agents will work on a single document. So each id/version is a UUID, and the previous version is stored so a trace can be constructed. (In itself, it's not a blockchain such that each version can be verified in the context of the previous version).</p>
<h2 id="schemas-basic-types"><a class="header" href="#schemas-basic-types">Schemas: basic types</a></h2>
<p>Every JACS doc has a header. These are created automatically.</p>
<p>You only need to use the agents and header to record and verify permissions on any type of document</p>
<ul>
<li><a href="https://github.com/HumanAssisted/JACS/tree/main/docs/schema/header.md">Header</a> -  the signature along with permissions</li>
<li><a href="https://github.com/HumanAssisted/JACS/tree/main/docs/schema/agent.md">Agents</a> - a type of resource that can take action</li>
<li><a href="https://github.com/HumanAssisted/JACS/tree/main/docs/schema/components/signature.md">Signatures</a> - cryptographically signed signature of the version of the document</li>
<li><a href="https://github.com/HumanAssisted/JACS/tree/main/docs/schema/components/files.md">Files</a> - documents you can sign and "attach"</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
