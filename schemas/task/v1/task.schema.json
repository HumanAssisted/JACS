{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://hai.ai/schemas/task/v1/task-schema.json",
  "title": "Task",
  "description": "General schema for a task",
  "type": "object",
  "properties": {
    "id": {
      "description": "Resource GUID",
      "type": "string",
      "format": "uuid"
    },
    "name": {
      "description": "Name of the agent, unique per registrar",
      "type": "string"
    },
    "description": {
      "description": "General description",
      "type": "string"
    },
    "success": {
      "description": "Description of success",
      "type": "string"
    },
    "version": {
      "description": "Semantic of the version of the task",
      "type": "string"
    },
    "version_date": {
      "description": "Date ",
      "format": "date-time",
      "type": "string"
    },
    "registration": {
      "description": "Where the resource is registered",
      "$ref": "../../signature/v1/signature.schema.json"
    },
    "lockedState": {
      "description": "Is the document locked from edits",
      "type": "string",
      "enum": [
        "open",
        "editlock",
        "closed"
      ]
    },
    "lockedBy": {
      "description": "Agent ID holding lock",
      "type": "string",
      "format": "uuid"
    },
    "lockedUntil": {
      "description": "When the lock expires",
       "format": "date-time",
       "type": "string"
    },
    "permissions": {
      "type": "array",
      "desciption": "list of permissions other agents have",
      "items": {
        "$ref": "../../permission/v1/permission.schema.json"
      }
    },
    "files": {
      "type": "array",
      "desciption": "list of files  ",
      "items": {
        "$ref": "../../files/v1/files.schema.json"
      }
    },
    "resources": {
      "type": "array",
      "desciption": "list of resources needed",
      "items": {
        "type": "string",
        "description": "resource ids",
        "format": "uuid"
      }
    },
    "actionsDesired": {
      "type": "array",
      "desciption": "list of actions desired, should be a subset of actions in the resources and agents when complete.",
      "items": {
        "$ref": "../../action/v1/action.schema.json"
      }
    },
    "descisions":  {
      "type": "array",
      "desciption": "descision is a log message of version changes, actions or edits, verified with a signature",
      "items": {
        "$ref": "../../decision/v1/decision.schema.json"
      }
    },

    "subTaskOf": {
      "type": "array",
      "desciption": "list of task ids this may be a subtask of.",
      "items": {
        "type": "string",
        "description": "taskid",
        "format": "uuid"
      }
    },
    "copyOf": {
      "type": "array",
      "desciption": "list of task ids this may be a copy of. Can be a partial copy, can be considered a branch.",
      "items": {
        "type": "string",
        "description": "taskid",
        "format": "uuid"
      }
    },
    "mergedTasks": {
      "type": "array",
      "desciption": "list of task ids that have been folded into this task.",
      "items": {
        "type": "string",
        "description": "taskid",
        "format": "uuid"
      }
    },


  },
  "required": [
    "id",
    "name",
    "description",
    "success",
    "permissions",
  ]
}
